library(httr)
library(jsonlite)
api_key <- 'fVnQw6kAGUfwkaLWnhgmNmW7S6SxVx4E27oJgDG9'
# metadata request
get_metadata <- function(type='natural', date = NULL){
base_url <- paste("https://api.nasa.gov/EPIC/api/", type, sep = '')
# Construct the URL
url <- ifelse(is.null(date), base_url, paste0(base_url, "/date/", date))
# Make the API request
response <- GET(url, query = list(api_key = api_key))
# Check for successful response
if (http_type(response) == "application/json") {
# Parse the JSON response
data <- fromJSON(content(response, "text", encoding = "UTF-8"))
return(data)
} else {
stop("Failed to retrieve data from the EPIC API.")
}
}
# get image url
get_image_urls <- function(type='natural', date = NULL){
data <- get_metadata(type, date)
year <- substr(data$date, 1, 4)
month <- substr(data$date, 6, 7)
day <- substr(data$date, 9, 10)
image_urls <- paste('https://epic.gsfc.nasa.gov/archive', type, year, month, day, 'png', data$image, sep = '/')
image_urls <- paste(image_urls, '.png', sep = '')
image_urls
}
data <- get_metadata()
library(ggplot2)
library(ggmap)
plot_centroid <- function(type='natural', date = NULL){
data <- get_metadata(type, date)
lat <- data$centroid_coordinates$lat
lon <- data$centroid_coordinates$lon
# getting the map
map <- get_map(location = c(lon = mean(lon), lat = mean(lat)), zoom = 4,
maptype = "satellite", scale = 2)
# plotting the map with some points on it
ggmap(map) +
geom_point(aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21) +
guides(fill=FALSE, alpha=FALSE, size=FALSE)
}
plot_centroid()
install.packages(c("leaflet", "sp"))
plot_centroid <- function(type='natural', date = NULL){
data <- get_metadata(type, date)
lat <- data$centroid_coordinates$lat
lon <- data$centroid_coordinates$lon
# # getting the map
# map <- get_map(location = c(lon = mean(lon), lat = mean(lat)), zoom = 4,
#                       maptype = "satellite", scale = 2)
#
# # plotting the map with some points on it
# ggmap(map) +
#   geom_point(aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21) +
#   guides(fill=FALSE, alpha=FALSE, size=FALSE)
library(sp)
library(leaflet)
df <- data.frame(longitude = lon,
latitude = lat)
coordinates(df) <- ~longitude+latitude
leaflet(df) %>% addMarkers() %>% addTiles()
}
plot_centroid()
plot_centroid <- function(type='natural', date = NULL){
data <- get_metadata(type, date)
# # getting the map
# map <- get_map(location = c(lon = mean(lon), lat = mean(lat)), zoom = 4,
#                       maptype = "satellite", scale = 2)
#
# # plotting the map with some points on it
# ggmap(map) +
#   geom_point(aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21) +
#   guides(fill=FALSE, alpha=FALSE, size=FALSE)
library(sp)
library(leaflet)
df <- data.frame(longitude = data$centroid_coordinates$lon,
latitude = data$centroid_coordinates$lat,
name = data$image)
coordinates(df) <- ~longitude+latitude
leaflet(df) %>% addMarkers(lable= ~htmlEscape(name)) %>% addTiles()
}
plot_centroid()
plot_centroid <- function(type='natural', date = NULL){
data <- get_metadata(type, date)
# # getting the map
# map <- get_map(location = c(lon = mean(lon), lat = mean(lat)), zoom = 4,
#                       maptype = "satellite", scale = 2)
#
# # plotting the map with some points on it
# ggmap(map) +
#   geom_point(aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21) +
#   guides(fill=FALSE, alpha=FALSE, size=FALSE)
library(sp)
library(leaflet)
df <- data.frame(longitude = data$centroid_coordinates$lon,
latitude = data$centroid_coordinates$lat,
name = data$image)
#coordinates(df) <- ~longitude+latitude
leaflet(df) %>% addTiles() %>% addMarkers(~longitude, ~latitude, label = ~htmlEscape(name))
}
plot_centroid()
plot_centroid <- function(type='natural', date = NULL){
data <- get_metadata(type, date)
# # getting the map
# map <- get_map(location = c(lon = mean(lon), lat = mean(lat)), zoom = 4,
#                       maptype = "satellite", scale = 2)
#
# # plotting the map with some points on it
# ggmap(map) +
#   geom_point(aes(x = lon, y = lat, fill = "red"), size = 5, shape = 21) +
#   guides(fill=FALSE, alpha=FALSE, size=FALSE)
library(sp)
library(leaflet)
library(htmltools)
df <- data.frame(longitude = data$centroid_coordinates$lon,
latitude = data$centroid_coordinates$lat,
name = data$image)
#coordinates(df) <- ~longitude+latitude
leaflet(df) %>% addTiles() %>% addMarkers(~longitude, ~latitude, label = ~htmlEscape(name))
}
plot_centroid()
plot_centroid(date='2022-02-01')
plot_centroid(date='2022-07-01')
